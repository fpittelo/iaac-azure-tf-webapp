# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger: none
#- main

stages:
  - stage: deploy
    jobs:
      - job: archive
        steps:
        - task: ArchiveFiles@2
          inputs:
            rootFolderOrFile: '$(Build.BinariesDirectory)'
            includeRootFolder: true
            archiveType: 'zip'
            archiveFile: '$(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip'
            replaceExistingArchive: true
      - job: deploy
        continueOnError: false
        steps:
          - task: AzureWebApp@1
            inputs:
              azureSubscription: 'Pay-As-You-Go(a6f24a81-7804-44a9-b074-25a9781afd24)'
              appType: 'webAppLinux'
              appName: 'website'
              deployToSlotOrASE: true
              resourceGroupName: 'LABS'
              slotName: 'production'
              package: '$(System.DefaultWorkingDirectory)/**/*.zip'
              runtimeStack: 'STATICSITE|1.0'